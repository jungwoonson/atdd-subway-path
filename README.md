# 지하철 노선도 미션
[ATDD 강의](https://edu.nextstep.camp/c/R89PYi5H) 실습을 위한 지하철 노선도 애플리케이션

## 기능 요구사항
### 1단계 - 구간 추가 요구사항 반영
- 노선에 역 추가 시 노선 가운데 추가 할 수 있다.
  - Given: 특정 노선에 A-C 구간이 등록되어 있고,
  - When: A-C 사이에  A-B 구간을 추가하면,
  - Then: 노선 조회 시 A-B-C 구간이 등록되어있다.
- 노선에 역 추가 시 노선 처음에 추가 할 수 있다.
  - Given: 특정 노선에 B-C 구간이 등록되어 있고,
  - When: B-C 앞에  A-B 구간을 추가하면,
  - Then: 노선 조회 시 A-B-C 구간이 등록되어있다.
- 이미 등록되어있는 역은 노선에 등록될 수 없다.
### 2단계 - 구간 제거 요구사항 반영
- 위치에 상관없이 지하철 노선에 역을 제거 할 수 있다
  - Given: 특정 노선에 구간이 2개 이상 등록되어 있고,
  - When: 지하철 노선에 위치에 상관없이 구간을 제거하면.
  - Then: 노선을 조회했을 때 구간이 제거된다.
### 3단계 - 경로 조회 기능
- Given: 연결된 구간을 가진 노선들이 존재하고,
- When: 출발역과 도착역을 입력하여 최단 경로를 조회하면,
- Then: 출발역에서 도착역까지 죄단 거리의 경로와 거리의 길이가 조회된다.

## 작업 목록
### 1단계 - 구간 추가 요구사항 반영
- 노선에 역 추가시 노선 가운데 추가 할 수 있다.
  - [x] 기존 인수 테스트 수정
  - [x] 인수테스트 작성
  - [x] Section.addSection() 유닛 테스트 작성
  - [x] 기존 distance보다 새로운 distance가 작아야한다.
  - [x] 사용하지 않는 예외 제거
- 노선에 역 추가 시 노선 처음에 추가 할 수 있다.
  - [x] 인수 테스트 작성
  - [x] 유닛 테스트 작성
  - [x] 기능 구현
  - [x] 구간 추가 메서드 추출로 리팩터링
  - [x] 구간 추가 테스트 간소화
  - [x] 구간 추가 = addSection 으로 통일
  - [x] Sections 생성 시 첫 구간 판단을 Sections 본인이 하도록 수정
- 이미 등록되어있는 역은 노선에 등록될 수 없다.
  - [x] 가운데 추가하는 구간의 하행역은 기존 구간에 중복되는 역이 존재해선 안된다.
  - [x] 마지막에 추가하는 구간의 하행역은 기존 구간에 중복되는 역이 존재해선 안된다.
  - [x] 처음에 추가하는 구간의 상행역은 기존 구간에 중복되는 역이 존재해선 안된다.
  - [x] 중복 역 에러가 발생하면 400을 리턴하는 컨트롤러 테스트 추가
### 2단계 - 구간 제거 요구사항 반영
- 이전 미션 리뷰어 피드백 반영
  - [x] 상수명 네이밍 컨벤션 지키기
  - [x] ~~createStation() 메서드 명 createSection() 으로 수정~~
  - [x] 빌더 패턴의 장점을 살리지 못하는 createSection() 수정
  - [x] if 문에서 '{}' 생략 된 부분 추가
  - [x] Sections of(Section... section) 가변인수 사용하는 부분 개선
  - [x] 구간 생성 분기 조건 부분 메서드 추출로 가독성 높이기
  - [x] @MethodSource 사용으로 인한 오류 테스트 pure function 으로 수정
- 위치에 상관없이 지하철 노선에 역을 제거 할 수 있다
  - [x] 마지막만 제거 가능하던 제약조건 삭제
  - [x] 인수 테스트 작성
  - [x] 유닛 테스트 작성
  - [x] 기능 구현
### 3단계 - 경로 조회 기능
- 이전 미션 리뷰어 피드백 반영
  - [x] 정적 팩토리 메서드 고민
    - [정적 팩토리 메서드에 대해 생각해보기](#정적-팩토리-메서드에-대해-생각해보기)
  - [x] 테스트 주석 개선
  - [ ] lookUp/get/find/retrieve/search 등 검색을 위한 컨벤션 적용하여 필드/메서드명 개선
    - [컨벤션에 대하여 생각해보기](#컨벤션에-대하여-생각해보기)
  - [ ] 구간의 첫 번째를 판단하는 isFirst 개선
    
- 경로 조회 기능 추가
  - [ ] 인수 테스트 작성
  - [ ] 가장 짧은 경로를 조회하는 서비스 테스트 및 기능 구현
  - [ ] 예외 유닛 테스트 작성 및 기능 구현

## 정적 팩토리 메서드에 대해 생각해보기
### 정적 팩토리 메서드의 장점
1. 객체 생성 메서드에 이름을 부여할 수 있다.
2. 매번 새로운 객체를 반환하지 않고 이미 생성된 객체를 재사용할 수 있다.
3. 하위 클래스를 반환할 수 있다.
4. 객체 생성 전략을 캡슐화할 수 있다.
### 적적 팩토리 메서드명 컨벤션 정리
1. from: 하나의 매개변수를 받아 해당 타입의 객체를 반환.
2. of: 여러 매개변수를 받아 객체를 생성할 때 사용, 매개변수의 수와 상관없이 사용될 수 있음.
3. valueOf: from과 유사하지만, 보통 문자열 같은 다양한 형식의 데이터를 받아들이는 경우 사용.
4. instance: 인스턴스를 생성하거나 캐싱된 인스턴스를 반환할 때 사용. 주로 싱글턴 패턴을 구현할 때 사용.
5. create: 새로운 인스턴스를 매번 생성할 때 사용. 

## 컨벤션에 대하여 생각해보기
### 컨벤션을 지켜야 하는 이유
1. 일관성: 명확한 규칙에 따라 이름이 지어지면 그 목적과 기능을 직관적으로 이해할 수 있다.
2. 가독성: 코드를 읽고 이해하는 데 도움을 주며, 유지보수 작업을 용이하게 만든다.
3. 유지보수: 불일치는 디버깅과 테스트를 어렵게 만든다. 버그 발생 가능성 높아진다. 
4. 협업: 팀 내 커뮤니케이션이 원활해진다. 혼란을 줄일 수 있다.
5. 사용자 경험: API의 채택률을 높이고 사용자 만족도를 향상 시킨다. 문서 없이도 쉽게 탐색할 수 있다.
### 검색 컨벤션 정리
1. LookUp: 일반적으로 단일 항목을 조회. 특정 사용자나 제품 ID로 항목을 조회할 때 적합.
2. Get: 가장 일반적이고 널리 사용되는 용어. 단일 항목 또는 목록을 조회.
3. Find: 특정 조건에 맞는 항목을 검색. 복수의 결과가 반환될 수 있음.
4. Retrieve: 데이터나 리소스를 복원하거나 가져옴. 주로 백업된 데이터를 다시 가져오거나 삭제된 데이터를 복구할 때 사용.
5. Search: 고급 검색 기능을 제공. 검색 조건이 복잡하거나 여러 필터가 적용될 때 적합.
6. Query: 특정 조건을 기반으로 데이터를 질의. 데이터베이스 질의와 유사한 개념을 제공할 때 적합.
7. Fetch: 데이터를 가져옴, 일반적으로 데이터를 검색하고 반환하는 의미로 사용.
8. Filter: 특정 조건에 따라 데이터를 필터링. 검색 조건이 명확하고 제한적인 경우에 적합.
9. List: 목록을 가져올 때 사용, 특히 데이터의 집합을 반환하는 경우에 적합.
10. Browse: 데이터를 탐색할 때 사용, 계층 구조 또는 분류 체계를 탐색하는 경우에 적합.
11. Explore: 데이터를 탐색하고 발견하는 기능을 제공할 때 사용. 일반적으로 여러 조건이나 필터를 적용하여 데이터를 탐색하는 경우에 적합.
